<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>电子贺卡 — 送给你</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --accent:#ff7aa2;
    --muted:#9aa4b2;
    --glass: rgba(255,255,255,0.04);
    --radius:20px;
    --font-sans: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  /* >>> 编辑区：在这里改文字/颜色等（见注释） >>> */
  /* 可修改主色：--accent（点缀色）和--bg（背景） */
  /* 可修改贺卡文本在<script>中DATA里 */
  /* <<< 编辑区结束 <<< */

  html,body{
    height:100%;
    margin:0;
    font-family:var(--font-sans);
    background: radial-gradient(1200px 600px at 10% 20%, rgba(255,122,162,0.06), transparent),
                radial-gradient(1000px 500px at 90% 80%, rgba(120,160,255,0.03), transparent),
                var(--bg);
    color:#e6eef6;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  .wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
    box-sizing:border-box;
  }

  .stage{
    width:100%;
    max-width:920px;
    perspective:1400px;
  }

  .card {
    width:100%;
    max-width:760px;
    margin:0 auto;
    transform-style:preserve-3d;
    transition:transform 900ms cubic-bezier(.2,.9,.26,1);
    cursor:pointer;
    touch-action: manipulation;
  }

  .card.open {
    transform: rotateY(180deg) translateY(-6px) scale(1.01);
  }

  .face{
    backface-visibility:hidden;
    border-radius:var(--radius);
    padding:28px;
    box-sizing:border-box;
    box-shadow: 0 20px 40px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent), var(--card);
    min-height:48vh;
    display:flex;
    gap:18px;
    align-items:center;
    justify-content:space-between;
  }

  .front{
    position:relative;
  }

  .back{
    position:absolute;
    top:0; left:0; right:0; bottom:0;
    transform: rotateY(180deg);
    overflow:hidden;
  }

  /* left column (visual) */
  .visual{
    flex:1 1 46%;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:240px;
  }

  .visual .scene{
    width:100%;
    max-width:320px;
    aspect-ratio:1.1/1;
    border-radius:14px;
    background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    display:grid;
    place-items:center;
    position:relative;
    overflow:hidden;
    border:1px solid var(--glass);
  }

  .glow {
    position:absolute;
    inset:0;
    pointer-events:none;
    mix-blend-mode:screen;
    opacity:0.9;
  }

  /* right column (text) */
  .content{
    flex:1 1 54%;
    padding:18px 24px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  .meta{
    font-size:12px;
    color:var(--muted);
  }

  h1{
    margin:0;
    font-size:clamp(20px,4vw,30px);
    letter-spacing:0.2px;
  }

  p.lead{
    margin:6px 0 0 0;
    color:#eaf1ff;
    font-size:clamp(15px,3vw,17px);
    line-height:1.45;
  }

  .btns{
    margin-top:auto;
    display:flex;
    gap:10px;
    align-items:center;
  }

  .btn{
    padding:10px 14px;
    border-radius:12px;
    font-weight:600;
    font-size:14px;
    border:none;
    background:linear-gradient(90deg,var(--accent), #ffb0d1);
    color:#081223;
    box-shadow: 0 6px 18px rgba(255,122,162,0.12);
    cursor:pointer;
    touch-action:manipulation;
  }

  .outline{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--muted);
    font-weight:600;
  }

  /* card back content */
  .back .messageBox{
    width:100%;
    height:100%;
    padding:28px;
    display:flex;
    flex-direction:column;
    gap:14px;
    justify-content:space-between;
  }

  .message{
    flex:1;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:8px 20px;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    font-size:clamp(16px,3.6vw,18px);
    line-height:1.6;
  }

  .signature{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    color:var(--muted);
    font-size:13px;
  }

  /* small-screen tweaks */
  @media (max-width:640px){
    .face{ padding:18px; min-height:56vh; gap:10px; }
    .visual{ display:block; width:100%; max-width:none; }
    .content{ padding:6px 8px; }
    .message{ font-size:16px; padding:12px; }
  }

  /* subtle animated ornament */
  .heartbeat{
    animation:beat 1600ms infinite;
    transform-origin:center;
  }
  @keyframes beat{
    0%{ transform:scale(1); opacity:0.98 }
    50%{ transform:scale(1.06); opacity:1 }
    100%{ transform:scale(1); opacity:0.98 }
  }

  /* confetti canvas sits on top */
  #confetti {
    position:fixed;
    left:0; top:0; width:100%; height:100%;
    pointer-events:none;
    z-index:60;
  }

  /* small helper for copy link toast */
  .toast{
    position:fixed;
    left:50%; transform:translateX(-50%);
    bottom:28px;
    padding:10px 16px;
    border-radius:12px;
    background:rgba(4,8,18,0.72);
    color:#dff3ff;
    font-size:13px;
    box-shadow:0 8px 30px rgba(2,6,23,0.6);
    opacity:0;
    transition:opacity .28s ease, transform .28s ease;
    z-index:120;
  }
  .toast.show{ opacity:1; transform:translateX(-50%) translateY(-6px); }
</style>
</head>
<body>
<canvas id="confetti"></canvas>
<div class="wrap">
  <div class="stage">
    <div id="card" class="card" aria-label="电子贺卡，点击或轻触翻开">
      <!-- 前面 -->
      <div class="face front" role="button" tabindex="0">
        <div class="visual" aria-hidden="true">
          <div class="scene" id="scene">
            <!-- SVG 小场景（可替换） -->
            <svg viewBox="0 0 300 300" width="86%" height="86%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <defs>
                <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#ffb0d1"/><stop offset="1" stop-color="#ff7aa2"/></linearGradient>
                <filter id="f1" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur stdDeviation="8" result="b"/></filter>
              </defs>
              <rect x="0" y="0" width="300" height="300" rx="16" fill="url(#g1)" opacity="0.06"/>
              <g transform="translate(20,40)">
                <g class="heartbeat" transform="translate(120,80)">
                  <path d="M-30,8 C-30,-20 30,-20 30,8 C30,36 -30,52 -30,8 Z" fill="#fff" opacity="0.16"/>
                  <path d="M-24,8 C-24,-16 24,-16 24,8 C24,32 -24,46 -24,8 Z" fill="url(#g1)" filter="url(#f1)"/>
                </g>
              </g>
            </svg>
          </div>
        </div>

        <div class="content">
          <div class="meta">电子贺卡 · 触摸打开</div>
          <h1 id="title">给你的一点小惊喜</h1>
          <p class="lead" id="subtitle">轻触/点击卡片 — 惊喜即刻出现</p>

          <div class="btns">
            <button id="openBtn" class="btn" aria-pressed="false">翻开贺卡</button>
            <button id="shareBtn" class="btn outline">保存/分享</button>
          </div>
        </div>
      </div>

      <!-- 反面（打开后） -->
      <div class="face back" aria-hidden="true">
        <div class="messageBox">
          <div class="message" id="message">
            祝你每一天都被温柔以待，愿阳光替你把好心情都挂上窗台。
          </div>

          <div class="signature">
            <div>— 你的朋友</div>
            <div style="display:flex;gap:8px;align-items:center">
              <button id="replay" class="btn outline">再看一次彩带</button>
              <button id="closeBtn" class="btn">合上</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<div id="toast" class="toast" role="status" aria-live="polite">已复制到剪贴板</div>

<script>
/* ========== 数据区：在这里修改贺卡内容 ========== */
const DATA = {
  title: "给你的一点小惊喜",
  subtitle: "轻触/点击卡片 — 惊喜即刻出现",
  message: "祝你每一天都被温柔以待；愿你在忙碌中仍能碰到意外的温柔与惊喜。—— 送给你的小小仪式感",
  signature: "— 来自 你 的 喵喵喵",
  accent: "#ff7aa2" // 可在这里改点缀色（同步CSS变量）
};
/* ========== 结束数据区 ========== */

document.documentElement.style.setProperty('--accent', DATA.accent);
document.getElementById('title').textContent = DATA.title;
document.getElementById('subtitle').textContent = DATA.subtitle;
document.getElementById('message').textContent = DATA.message;

const card = document.getElementById('card');
const openBtn = document.getElementById('openBtn');
const closeBtn = document.getElementById('closeBtn');
const replay = document.getElementById('replay');
const shareBtn = document.getElementById('shareBtn');
const toast = document.getElementById('toast');
const confettiCanvas = document.getElementById('confetti');

/* Accessibility: Enter / Space to toggle card when focused */
card.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter' || e.key === ' '){
    e.preventDefault();
    toggle();
  }
});

/* click handlers */
openBtn.addEventListener('click', toggle);
closeBtn.addEventListener('click', toggle);
card.addEventListener('click', (e)=>{
  // if user clicks buttons, ignore; otherwise flip
  if(e.target.tagName.toLowerCase() === 'button') return;
  toggle();
});
replay.addEventListener('click', ()=> fireConfetti(120));

shareBtn.addEventListener('click', async ()=>{
  // try Web Share API first (mobile)
  try {
    const blob = new Blob([document.documentElement.outerHTML], {type: 'text/html'});
    const file = new File([blob], 'ecard.html', {type:'text/html'});
    if(navigator.canShare && navigator.canShare({files:[file]})){
      await navigator.share({files:[file], title: DATA.title, text: DATA.subtitle});
      showToast('已打开分享面板');
      return;
    }
  } catch(e){
    // fallthrough
  }

  // fallback: copy URL if hosted, or copy content
  try {
    await navigator.clipboard.writeText(DATA.message);
    showToast('祝福内容已复制，粘贴分享吧');
  } catch(e){
    showToast('无法复制，请长按页面另存或截图分享');
  }
});

/* toggle */
let opened = false;
function toggle(){
  opened = !opened;
  if(opened){
    card.classList.add('open');
    openBtn.setAttribute('aria-pressed','true');
    fireConfetti(180);
  } else {
    card.classList.remove('open');
    openBtn.setAttribute('aria-pressed','false');
  }
}

/* toast */
function showToast(txt='已复制到剪贴板'){
  toast.textContent = txt;
  toast.classList.add('show');
  clearTimeout(toast._t);
  toast._t = setTimeout(()=> toast.classList.remove('show'), 2400);
}

/* Simple confetti: lightweight particle system */
(function initConfetti(){
  const W = () => window.innerWidth;
  const H = () => window.innerHeight;
  confettiCanvas.width = W();
  confettiCanvas.height = H();
  window.addEventListener('resize', ()=> {
    confettiCanvas.width = W();
    confettiCanvas.height = H();
  });

  const ctx = confettiCanvas.getContext('2d');
  const particles = [];

  function rand(min,max){ return Math.random()*(max-min)+min; }

  function spawn(n){
    for(let i=0;i<n;i++){
      particles.push({
        x: rand(0,confettiCanvas.width),
        y: rand(-20, confettiCanvas.height*0.2),
        vx: rand(-1.2, 1.2),
        vy: rand(1.8, 4.2),
        s: rand(6,12),
        r: rand(0, Math.PI*2),
        color: `hsl(${Math.floor(rand(300,360))} 95% ${rand(55,70)}%)`,
        life: rand(60,170),
        tilt: rand(-0.5,0.5)
      });
    }
  }

  function update(){
    ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.02;
      p.r += 0.03;
      p.tilt += 0.01;
      p.life--;
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.r);
      // draw rect with tilt to simulate confetti
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.s/2, -p.s/2 + Math.sin(p.tilt*10)*3, p.s, p.s*0.6);
      ctx.restore();
      if(p.y > confettiCanvas.height + 40 || p.life <= 0) particles.splice(i,1);
    }
    requestAnimationFrame(update);
  }
  update();

  // expose
  window.fireConfetti = function(n=100){
    spawn(n);
  };
})();

/* small UX: gentle entrance animation for title (optional) */
window.addEventListener('load', ()=>{
  const scene = document.getElementById('scene');
  scene.style.transform = 'translateY(0)';
});

/* touch hint: show small pulse for first-time users */
(function touchHint(){
  if('ontouchstart' in window){
    const el = document.querySelector('.meta');
    el.textContent += ' · 在移动端轻触卡片即可打开';
  }
})();
</script>
</body>
</html>
